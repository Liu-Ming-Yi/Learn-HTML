<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ–ç‰‡ä¸Šå‚³å·¥ä½œç«™ (Pro)</title>
    <style>
        :root {
            --upload-color: #2ecc71;   /* ç¶ è‰² */
            --bg-color: #f4f7f6; 
            --card-bg: #ffffff;
            --text-color: #333;
            --modal-bg: rgba(0, 0, 0, 0.6); /* æ¨¡æ…‹æ¡†èƒŒæ™¯ */
            --modal-card-bg: #ffffff;
            --button-primary: #3498db;
            --button-hover: #2980b9;
        }

        body {
            font-family: 'å¾®è»Ÿæ­£é»‘é«”', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 30px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--upload-color);
        }

        header h1 {
            color: var(--upload-color);
            margin-bottom: 5px;
        }

        /* GitHub é€£çµæ¨£å¼ */
        .github-link a {
            color: var(--button-primary);
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            margin-top: 10px;
            padding: 5px 10px;
            border: 1px solid var(--button-primary);
            border-radius: 4px;
            transition: background-color 0.2s, color 0.2s;
        }
        .github-link a:hover {
            background-color: var(--button-primary);
            color: white;
        }

        /* è­¦å‘Šè³‡è¨Š */
        .warning-box {
            background-color: #fef0f0;
            color: #c0392b;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #e74c3c;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
        }

        /* ä¸Šå‚³å¡ç‰‡ */
        .tool-area {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
        }

        .card {
            background-color: var(--card-bg);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
        }

        .card h3 {
            color: var(--text-color);
            padding-bottom: 10px;
            text-align: center;
        }

        /* ä¸Šå‚³æ¨£å¼ */
        #upload-input {
            display: none;
        }

        .upload-label {
            display: block;
            border: 3px dashed var(--upload-color);
            padding: 50px 20px;
            text-align: center;
            cursor: pointer;
            border-radius: 8px;
            color: var(--upload-color);
            transition: background-color 0.3s;
        }

        .upload-label:hover {
            background-color: #e6f7ef;
        }

        /* åœ–ç‰‡åº«æ¨£å¼ */
        .gallery-container h2 {
            color: var(--text-color);
            margin-bottom: 20px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
        }
        
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .image-item {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .image-item img {
            width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
        }
        /* ä¸åŒçš„åœ–ç‰‡æ¯”ä¾‹å°‡æ‡‰ç”¨ä¸åŒçš„é«˜åº¦ */
        .image-item.aspect-original img { height: auto; }
        .image-item.aspect-1-1 img { aspect-ratio: 1 / 1; }
        .image-item.aspect-4-3 img { aspect-ratio: 4 / 3; }
        .image-item.aspect-16-9 img { aspect-ratio: 16 / 9; }

        /* æ¨¡æ…‹æ¡† (Modal) æ¨£å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: var(--modal-bg);
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--modal-card-bg);
            margin: auto;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 500px;
            text-align: center;
            position: relative;
            transform: translateY(-50px);
            opacity: 0;
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
        }
        .modal.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        .modal-content h3 {
            color: var(--button-primary);
            margin-top: 0;
            margin-bottom: 20px;
        }

        .modal-preview img {
            max-width: 100%;
            max-height: 200px;
            display: block;
            margin: 0 auto 20px auto;
            border: 1px solid #eee;
            border-radius: 5px;
            object-fit: contain;
        }

        .aspect-ratio-buttons button {
            background-color: #eee;
            color: var(--text-color);
            border: 1px solid #ccc;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
        }

        .aspect-ratio-buttons button:hover {
            background-color: #ddd;
            border-color: #aaa;
        }

        .aspect-ratio-buttons button.selected {
            background-color: var(--button-primary);
            color: white;
            border-color: var(--button-primary);
        }

        .modal-actions {
            margin-top: 25px;
        }

        .modal-actions button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin: 0 5px;
        }

        .modal-actions .confirm-btn {
            background-color: var(--upload-color);
            color: white;
        }
        .modal-actions .confirm-btn:hover {
            background-color: #27ad60;
        }

        .modal-actions .cancel-btn {
            background-color: #ccc;
            color: var(--text-color);
        }
        .modal-actions .cancel-btn:hover {
            background-color: #bbb;
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>ğŸ–¼ï¸ åœ–ç‰‡ä¸Šå‚³å·¥ä½œç«™ (Pro)</h1>
            <p>ä¸Šå‚³æ‚¨çš„åœ–ç‰‡ï¼ˆåŒ…å« GIFï¼‰ï¼Œä¸¦é¸æ“‡é¡¯ç¤ºæ¯”ä¾‹ã€‚åœ–ç‰‡åƒ…åœ¨æ‚¨ç•¶å‰åˆ†é è¨˜æ†¶é«”ä¸­ï¼Œé—œé–‰å³æ¸…é™¤ã€‚</p>
            
            <p class="github-link">
                <a href="https://liu-ming-yi.github.io/Learn-HTML/" target="_blank">
                    ğŸ”— è¿”å› GitHub å°ˆæ¡ˆ
                </a>
            </p>
            </header>

        <div class="warning-box">
            ğŸ”´ **é‡è¦æç¤ºï¼š** é€™å€‹ç¶²é ä¸æœƒå„²å­˜ä»»ä½•æ•¸æ“šã€‚è«‹å‹¿å°‡æ­¤è¦–ç‚ºæª”æ¡ˆå‚™ä»½å·¥å…·ã€‚
        </div>

        <div class="tool-area">
            <div class="card">
                <h3>é»æ“Šä¸Šå‚³åœ–ç‰‡</h3>
                <input type="file" id="upload-input" accept="image/*" onchange="handleFileUpload(this.files[0])">
                <label for="upload-input" class="upload-label">
                    é»æ“Šæ­¤è™•é¸æ“‡åœ–ç‰‡æª”æ¡ˆ
                    <p style="font-size: 0.9em; margin-top: 5px;">(æ”¯æ´ JPG, PNG, GIF ç­‰æ ¼å¼)</p>
                </label>
            </div>
        </div>

        <div class="gallery-container">
            <h2>âœ¨ æˆ‘çš„è‡¨æ™‚åœ–ç‰‡åº«</h2>
            <div id="gallery" class="image-gallery">
                </div>
        </div>
    </div>

    <div id="aspectRatioModal" class="modal">
        <div class="modal-content">
            <h3>é¸æ“‡åœ–ç‰‡é¡¯ç¤ºæ¯”ä¾‹</h3>
            <div class="modal-preview">
                <img id="modalPreviewImage" src="#" alt="åœ–ç‰‡é è¦½">
            </div>
            <div class="aspect-ratio-buttons">
                <button data-aspect="original" class="selected">åŸå§‹æ¯”ä¾‹</button>
                <button data-aspect="1-1">1:1 æ­£æ–¹å½¢</button>
                <button data-aspect="4-3">4:3 (ç¶“å…¸)</button>
                <button data-aspect="16-9">16:9 (å¯¬è¢å¹•)</button>
            </div>
            <div class="modal-actions">
                <button class="confirm-btn" onclick="confirmAspectRatio()">ç¢ºå®š</button>
                <button class="cancel-btn" onclick="cancelAspectRatio()">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <script>
        let currentUploadedImage = null; // å„²å­˜ç•¶å‰ä¸Šå‚³çš„åœ–ç‰‡ Data URL
        let currentSelectedAspect = 'original'; // å„²å­˜ç•¶å‰é¸æ“‡çš„æ¯”ä¾‹

        // æ ¸å¿ƒåŠŸèƒ½ï¼šå°‡åœ–ç‰‡æ·»åŠ åˆ°ç•¶å‰é é¢
        function addImageToGallery(imageUrl, altText, aspectRatioClass) {
            const gallery = document.getElementById('gallery');
            
            const newImageItem = document.createElement('div');
            // æ·»åŠ æ¯”ä¾‹é¡åˆ¥
            newImageItem.className = `image-item ${aspectRatioClass}`; 
            
            const imgElement = document.createElement('img');
            imgElement.src = imageUrl;
            imgElement.alt = altText;
            
            newImageItem.appendChild(imgElement);
            
            // å°‡æ–°åœ–ç‰‡åŠ åˆ°åœ–ç‰‡åº«çš„æœ€å‰é¢
            gallery.prepend(newImageItem);
        }

        // è™•ç†æª”æ¡ˆä¸Šå‚³ï¼Œä¸¦é¡¯ç¤ºæ¨¡æ…‹æ¡†
        function handleFileUpload(file) {
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                currentUploadedImage = e.target.result; // å„²å­˜ Data URL
                
                // é¡¯ç¤ºæ¨¡æ…‹æ¡†ä¸¦è¼‰å…¥é è¦½åœ–
                const modal = document.getElementById('aspectRatioModal');
                const modalPreviewImage = document.getElementById('modalPreviewImage');
                modalPreviewImage.src = currentUploadedImage;
                
                // é‡ç½®é¸æ“‡çš„æ¯”ä¾‹ç‚ºåŸå§‹æ¯”ä¾‹ï¼Œä¸¦æ›´æ–°æŒ‰éˆ•æ¨£å¼
                currentSelectedAspect = 'original';
                const buttons = modal.querySelectorAll('.aspect-ratio-buttons button');
                buttons.forEach(btn => {
                    btn.classList.remove('selected');
                    if (btn.dataset.aspect === 'original') {
                        btn.classList.add('selected');
                    }
                });

                // é¡¯ç¤ºæ¨¡æ…‹æ¡†
                modal.style.display = 'flex'; // ä½¿ç”¨ flex è®“å®ƒç½®ä¸­
                setTimeout(() => modal.classList.add('show'), 10); // æ·»åŠ  show é¡åˆ¥ä»¥è§¸ç™¼å‹•ç•«
            };
            
            reader.readAsDataURL(file); 
        }

        // é¸æ“‡æ¯”ä¾‹æŒ‰éˆ•çš„é»æ“Šäº‹ä»¶
        document.querySelector('.aspect-ratio-buttons').addEventListener('click', function(event) {
            if (event.target.tagName === 'BUTTON') {
                const selectedButton = event.target;
                const buttons = this.querySelectorAll('button');
                buttons.forEach(btn => btn.classList.remove('selected')); // ç§»é™¤æ‰€æœ‰é¸ä¸­ç‹€æ…‹
                selectedButton.classList.add('selected'); // ç‚ºé»æ“Šçš„æŒ‰éˆ•æ·»åŠ é¸ä¸­ç‹€æ…‹
                currentSelectedAspect = selectedButton.dataset.aspect; // æ›´æ–°é¸æ“‡çš„æ¯”ä¾‹
            }
        });

        // ç¢ºå®šæŒ‰éˆ•çš„é»æ“Šäº‹ä»¶
        function confirmAspectRatio() {
            if (currentUploadedImage) {
                // å°‡åœ–ç‰‡æ·»åŠ åˆ°åœ–åº«ï¼Œä¸¦å‚³å…¥é¸æ“‡çš„æ¯”ä¾‹é¡åˆ¥
                addImageToGallery(currentUploadedImage, 'ä¸Šå‚³åœ–ç‰‡', `aspect-${currentSelectedAspect}`);
                alert('åœ–ç‰‡å·²ä¸Šå‚³ä¸¦é¡¯ç¤ºï¼');
            }
            hideModal();
            currentUploadedImage = null; // æ¸…é™¤å·²ä¸Šå‚³åœ–ç‰‡çš„ Data URL
        }

        // å–æ¶ˆæŒ‰éˆ•çš„é»æ“Šäº‹ä»¶
        function cancelAspectRatio() {
            hideModal();
            currentUploadedImage = null; // æ¸…é™¤å·²ä¸Šå‚³åœ–ç‰‡çš„ Data URL (å¦‚æœå–æ¶ˆå‰‡ä¸æ·»åŠ åˆ°åœ–åº«)
            alert('åœ–ç‰‡ä¸Šå‚³å·²å–æ¶ˆï¼');
        }

        // éš±è—æ¨¡æ…‹æ¡†
        function hideModal() {
            const modal = document.getElementById('aspectRatioModal');
            modal.classList.remove('show'); // ç§»é™¤ show é¡åˆ¥ä»¥è§¸ç™¼å‹•ç•«
            setTimeout(() => {
                modal.style.display = 'none'; // å‹•ç•«çµæŸå¾Œéš±è—
                document.getElementById('upload-input').value = ''; // æ¸…ç©ºæª”æ¡ˆé¸æ“‡ï¼Œä»¥ä¾¿å†æ¬¡ä¸Šå‚³åŒä¸€å€‹æª”æ¡ˆ
            }, 300); // ç­‰å¾…å‹•ç•«å®Œæˆ
        }

        // é»æ“Šæ¨¡æ…‹æ¡†å¤–éƒ¨ä¹Ÿé—œé–‰ (å¯é¸)
        document.getElementById('aspectRatioModal').addEventListener('click', function(event) {
            if (event.target === this) {
                cancelAspectRatio();
            }
        });
    </script>

</body>
</html>
